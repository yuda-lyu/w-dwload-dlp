/*!
 * w-dwload-dlp v1.0.3
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs"),require("process"),require("child_process"),require("archiver"),require("archiver-zip-encrypted"),require("unzipper")):"function"==typeof define&&define.amd?define(["path","fs","process","child_process","archiver","archiver-zip-encrypted","unzipper"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-dwload-dlp"]=e(t.path,t.fs,t.process,t.child_process,t.archiver,t["archiver-zip-encrypted"],t.unzipper)}(this,(function(t,e,r,n,i,o,u){"use strict";var c=Array.isArray,a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,f=a||s||Function("return this")(),l=f.Symbol,h=Object.prototype,p=h.hasOwnProperty,d=h.toString,v=l?l.toStringTag:void 0;var y=Object.prototype.toString;var b="[object Null]",g="[object Undefined]",_=l?l.toStringTag:void 0;function m(t){return null==t?void 0===t?g:b:_&&_ in Object(t)?function(t){var e=p.call(t,v),r=t[v];try{t[v]=void 0;var n=!0}catch(t){}var i=d.call(t);return n&&(e?t[v]=r:delete t[v]),i}(t):function(t){return y.call(t)}(t)}function j(t){return null!=t&&"object"==typeof t}var w="[object Symbol]";function S(t){return"symbol"==typeof t||j(t)&&m(t)==w}var $=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;function x(t,e){if(c(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!S(t))||(O.test(t)||!$.test(t)||null!=e&&t in Object(e))}function M(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var z="[object AsyncFunction]",D="[object Function]",k="[object GeneratorFunction]",P="[object Proxy]";function A(t){if(!M(t))return!1;var e=m(t);return e==D||e==k||e==z||e==P}var T,F=f["__core-js_shared__"],E=(T=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";var L=Function.prototype.toString;function C(t){if(null!=t){try{return L.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var N=/^\[object .+?Constructor\]$/,Y=Function.prototype,R=Object.prototype,W=Y.toString,H=R.hasOwnProperty,I=RegExp("^"+W.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function U(t){return!(!M(t)||(e=t,E&&E in e))&&(A(t)?I:N).test(C(t));var e}function q(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0}var B=q(Object,"create");var V=Object.prototype.hasOwnProperty;var J=Object.prototype.hasOwnProperty;function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function G(t,e){return t===e||t!=t&&e!=e}function Q(t,e){for(var r=t.length;r--;)if(G(t[r][0],e))return r;return-1}Z.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(B){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return V.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return B?void 0!==e[t]:J.call(e,t)},Z.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=B&&void 0===e?"__lodash_hash_undefined__":e,this};var K=Array.prototype.splice;function X(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,r=Q(e,t);return!(r<0)&&(r==e.length-1?e.pop():K.call(e,r,1),--this.size,!0)},X.prototype.get=function(t){var e=this.__data__,r=Q(e,t);return r<0?void 0:e[r][1]},X.prototype.has=function(t){return Q(this.__data__,t)>-1},X.prototype.set=function(t,e){var r=this.__data__,n=Q(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var tt=q(f,"Map");function et(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function rt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rt.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(tt||X),string:new Z}},rt.prototype.delete=function(t){var e=et(this,t).delete(t);return this.size-=e?1:0,e},rt.prototype.get=function(t){return et(this,t).get(t)},rt.prototype.has=function(t){return et(this,t).has(t)},rt.prototype.set=function(t,e){var r=et(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var nt="Expected a function";function it(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(nt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=t.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(it.Cache||rt),r}it.Cache=rt;var ot,ut,ct,at=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,st=/\\(\\)?/g,ft=(ot=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(at,(function(t,r,n,i){e.push(n?i.replace(st,"$1"):r||t)})),e},ut=it(ot,(function(t){return 500===ct.size&&ct.clear(),t})),ct=ut.cache,ut),lt=ft;function ht(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var pt=1/0,dt=l?l.prototype:void 0,vt=dt?dt.toString:void 0;function yt(t){if("string"==typeof t)return t;if(c(t))return ht(t,yt)+"";if(S(t))return vt?vt.call(t):"";var e=t+"";return"0"==e&&1/t==-pt?"-0":e}function bt(t){return null==t?"":yt(t)}function gt(t,e){return c(t)?t:x(t,e)?[t]:lt(bt(t))}var _t=1/0;function mt(t){if("string"==typeof t||S(t))return t;var e=t+"";return"0"==e&&1/t==-_t?"-0":e}function jt(t,e){for(var r=0,n=(e=gt(e,t)).length;null!=t&&r<n;)t=t[mt(e[r++])];return r&&r==n?t:void 0}function wt(t,e,r){var n=null==t?void 0:jt(t,e);return void 0===n?r:n}var St=Object.prototype;var $t=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Ot=$t,xt=Object.prototype.hasOwnProperty;function Mt(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||St))return Ot(t);var e,r,n=[];for(var i in Object(t))xt.call(t,i)&&"constructor"!=i&&n.push(i);return n}var zt=q(f,"DataView"),Dt=q(f,"Promise"),kt=q(f,"Set"),Pt=q(f,"WeakMap"),At="[object Map]",Tt="[object Promise]",Ft="[object Set]",Et="[object WeakMap]",Lt="[object DataView]",Ct=C(zt),Nt=C(tt),Yt=C(Dt),Rt=C(kt),Wt=C(Pt),Ht=m;(zt&&Ht(new zt(new ArrayBuffer(1)))!=Lt||tt&&Ht(new tt)!=At||Dt&&Ht(Dt.resolve())!=Tt||kt&&Ht(new kt)!=Ft||Pt&&Ht(new Pt)!=Et)&&(Ht=function(t){var e=m(t),r="[object Object]"==e?t.constructor:void 0,n=r?C(r):"";if(n)switch(n){case Ct:return Lt;case Nt:return At;case Yt:return Tt;case Rt:return Ft;case Wt:return Et}return e});var It=Ht,Ut=9007199254740991;function qt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ut}function Bt(t){return null!=t&&qt(t.length)&&!A(t)}var Vt="[object String]";function Jt(t){return function(e){return null==e?void 0:e[t]}}var Zt=Jt("length"),Gt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Qt(t){return Gt.test(t)}var Kt="\\ud800-\\udfff",Xt="["+Kt+"]",te="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ee="\\ud83c[\\udffb-\\udfff]",re="[^"+Kt+"]",ne="(?:\\ud83c[\\udde6-\\uddff]){2}",ie="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="(?:"+te+"|"+ee+")"+"?",ue="[\\ufe0e\\ufe0f]?",ce=ue+oe+("(?:\\u200d(?:"+[re,ne,ie].join("|")+")"+ue+oe+")*"),ae="(?:"+[re+te+"?",te,ne,ie,Xt].join("|")+")",se=RegExp(ee+"(?="+ee+")|"+ae+ce,"g");function fe(t){return Qt(t)?function(t){for(var e=se.lastIndex=0;se.test(t);)++e;return e}(t):Zt(t)}var le="[object Map]",he="[object Set]";function pe(t){if(null==t)return 0;if(Bt(t))return"string"==typeof(e=t)||!c(e)&&j(e)&&m(e)==Vt?fe(t):t.length;var e,r=It(t);return r==le||r==he?t.size:Mt(t).length}var de=/\s/;var ve=/^\s+/;function ye(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&de.test(t.charAt(e)););return e}(t)+1).replace(ve,""):t}var be=NaN,ge=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,me=/^0o[0-7]+$/i,je=parseInt;function we(t){if("number"==typeof t)return t;if(S(t))return be;if(M(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=M(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ye(t);var r=_e.test(t);return r||me.test(t)?je(t.slice(2),r?2:8):ge.test(t)?be:+t}var Se=1/0,$e=17976931348623157e292;function Oe(t){return t?(t=we(t))===Se||t===-Se?(t<0?-1:1)*$e:t==t?t:0:0===t?t:0}function xe(t){var e=Oe(t),r=e%1;return e==e?r?e-r:e:0}function Me(t){return"[object String]"===Object.prototype.toString.call(t)}function ze(t){return!(!Me(t)||""===t)}function De(t){return t!=t}function ke(t){let e=!1;if(ze(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(De(t))return!1;e=!0}return e}function Pe(t){if(!ke(t))return 0;return Oe(t)}function Ae(t){return!!ke(t)&&(t=Pe(t),"number"==typeof(e=t)&&e==xe(e));var e}var Te=f.isFinite,Fe=Math.min;var Ee=function(t){var e=Math[t];return function(t,r){if(t=we(t),(r=null==r?0:Fe(xe(r),292))&&Te(t)){var n=(bt(t)+"e").split("e");return+((n=(bt(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),Le=Ee;function Ce(t){if(!ke(t))return 0;t=Pe(t);let e=Le(t);return"0"===String(e)?0:e}let Ne="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Ye=Ne.length;function Re(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=[];var r;t=Ae(r=t)&&Ce(r)>0?Ce(t):32;for(let r=0;r<t;r++)e[r]=Ne[0|Math.random()*Ye];return e.join("")}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function We(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var He={exports:{}};!function(t,e){t.exports=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",o="minute",u="hour",c="day",a="week",s="month",f="quarter",l="year",h="date",p="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},b=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:b,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),i=r%60;return(e<=0?"+":"-")+b(n,2,"0")+":"+b(i,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(n,s),o=r-i<0,u=e.clone().add(n+(o?-1:1),s);return+(-(n+(r-i)/(o?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:l,w:a,d:c,D:h,h:u,m:o,s:i,ms:n,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},_="en",m={};m[_]=y;var j="$isDayjsObject",w=function(t){return t instanceof x||!(!t||!t[j])},S=function t(e,r,n){var i;if(!e)return _;if("string"==typeof e){var o=e.toLowerCase();m[o]&&(i=o),r&&(m[o]=r,i=o);var u=e.split("-");if(!i&&u.length>1)return t(u[0])}else{var c=e.name;m[c]=e,i=c}return!n&&i&&(_=i),i||!n&&_},$=function(t,e){if(w(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new x(r)},O=g;O.l=S,O.i=w,O.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function y(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[j]=!0}var b=y.prototype;return b.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(d);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(e)}(t),this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return O},b.isValid=function(){return!(this.$d.toString()===p)},b.isSame=function(t,e){var r=$(t);return this.startOf(e)<=r&&r<=this.endOf(e)},b.isAfter=function(t,e){return $(t)<this.startOf(e)},b.isBefore=function(t,e){return this.endOf(e)<$(t)},b.$g=function(t,e,r){return O.u(t)?this[e]:this.set(r,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,e){var r=this,n=!!O.u(e)||e,f=O.p(t),p=function(t,e){var i=O.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?i:i.endOf(c)},d=function(t,e){return O.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},v=this.$W,y=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return n?p(1,0):p(31,11);case s:return n?p(1,y):p(0,y+1);case a:var _=this.$locale().weekStart||0,m=(v<_?v+7:v)-_;return p(n?b-m:b+(6-m),y);case c:case h:return d(g+"Hours",0);case u:return d(g+"Minutes",1);case o:return d(g+"Seconds",2);case i:return d(g+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,e){var r,a=O.p(t),f="set"+(this.$u?"UTC":""),p=(r={},r[c]=f+"Date",r[h]=f+"Date",r[s]=f+"Month",r[l]=f+"FullYear",r[u]=f+"Hours",r[o]=f+"Minutes",r[i]=f+"Seconds",r[n]=f+"Milliseconds",r)[a],d=a===c?this.$D+(e-this.$W):e;if(a===s||a===l){var v=this.clone().set(h,1);v.$d[p](d),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},b.set=function(t,e){return this.clone().$set(t,e)},b.get=function(t){return this[O.p(t)]()},b.add=function(n,f){var h,p=this;n=Number(n);var d=O.p(f),v=function(t){var e=$(p);return O.w(e.date(e.date()+Math.round(t*n)),p)};if(d===s)return this.set(s,this.$M+n);if(d===l)return this.set(l,this.$y+n);if(d===c)return v(1);if(d===a)return v(7);var y=(h={},h[o]=e,h[u]=r,h[i]=t,h)[d]||1,b=this.$d.getTime()+n*y;return O.w(b,this)},b.subtract=function(t,e){return this.add(-1*t,e)},b.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),o=this.$H,u=this.$m,c=this.$M,a=r.weekdays,s=r.months,f=r.meridiem,l=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].slice(0,o)},h=function(t){return O.s(o%12||12,t,"0")},d=f||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(v,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return O.s(e.$y,4,"0");case"M":return c+1;case"MM":return O.s(c+1,2,"0");case"MMM":return l(r.monthsShort,c,s,3);case"MMMM":return l(s,c);case"D":return e.$D;case"DD":return O.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return l(r.weekdaysMin,e.$W,a,2);case"ddd":return l(r.weekdaysShort,e.$W,a,3);case"dddd":return a[e.$W];case"H":return String(o);case"HH":return O.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return d(o,u,!0);case"A":return d(o,u,!1);case"m":return String(u);case"mm":return O.s(u,2,"0");case"s":return String(e.$s);case"ss":return O.s(e.$s,2,"0");case"SSS":return O.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,h,p){var d,v=this,y=O.p(h),b=$(n),g=(b.utcOffset()-this.utcOffset())*e,_=this-b,m=function(){return O.m(v,b)};switch(y){case l:d=m()/12;break;case s:d=m();break;case f:d=m()/3;break;case a:d=(_-g)/6048e5;break;case c:d=(_-g)/864e5;break;case u:d=_/r;break;case o:d=_/e;break;case i:d=_/t;break;default:d=_}return p?d:O.a(d)},b.daysInMonth=function(){return this.endOf(s).$D},b.$locale=function(){return m[this.$L]},b.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=S(t,e,!0);return n&&(r.$L=n),r},b.clone=function(){return O.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},y}(),M=x.prototype;return $.prototype=M,[["$ms",n],["$s",i],["$m",o],["$H",u],["$W",c],["$M",s],["$y",l],["$D",h]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),$.extend=function(t,e){return t.$i||(t(e,x,$),t.$i=!0),$},$.locale=S,$.isDayjs=w,$.unix=function(t){return $(1e3*t)},$.en=m[_],$.Ls=m,$.p={},$}()}(He);var Ie=We(He.exports);function Ue(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function qe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var Be,Ve=function(t,e,r){for(var n=-1,i=Object(t),o=r(t),u=o.length;u--;){var c=o[Be?u:++n];if(!1===e(i[c],c,i))break}return t};function Je(t){return j(t)&&"[object Arguments]"==m(t)}var Ze=Object.prototype,Ge=Ze.hasOwnProperty,Qe=Ze.propertyIsEnumerable,Ke=Je(function(){return arguments}())?Je:function(t){return j(t)&&Ge.call(t,"callee")&&!Qe.call(t,"callee")},Xe=Ke;var tr="object"==typeof exports&&exports&&!exports.nodeType&&exports,er=tr&&"object"==typeof module&&module&&!module.nodeType&&module,rr=er&&er.exports===tr?f.Buffer:void 0,nr=(rr?rr.isBuffer:void 0)||function(){return!1},ir=9007199254740991,or=/^(?:0|[1-9]\d*)$/;function ur(t,e){var r=typeof t;return!!(e=null==e?ir:e)&&("number"==r||"symbol"!=r&&or.test(t))&&t>-1&&t%1==0&&t<e}var cr={};cr["[object Float32Array]"]=cr["[object Float64Array]"]=cr["[object Int8Array]"]=cr["[object Int16Array]"]=cr["[object Int32Array]"]=cr["[object Uint8Array]"]=cr["[object Uint8ClampedArray]"]=cr["[object Uint16Array]"]=cr["[object Uint32Array]"]=!0,cr["[object Arguments]"]=cr["[object Array]"]=cr["[object ArrayBuffer]"]=cr["[object Boolean]"]=cr["[object DataView]"]=cr["[object Date]"]=cr["[object Error]"]=cr["[object Function]"]=cr["[object Map]"]=cr["[object Number]"]=cr["[object Object]"]=cr["[object RegExp]"]=cr["[object Set]"]=cr["[object String]"]=cr["[object WeakMap]"]=!1;var ar="object"==typeof exports&&exports&&!exports.nodeType&&exports,sr=ar&&"object"==typeof module&&module&&!module.nodeType&&module,fr=sr&&sr.exports===ar&&a.process,lr=function(){try{var t=sr&&sr.require&&sr.require("util").types;return t||fr&&fr.binding&&fr.binding("util")}catch(t){}}(),hr=lr&&lr.isTypedArray,pr=hr?function(t){return function(e){return t(e)}}(hr):function(t){return j(t)&&qt(t.length)&&!!cr[m(t)]},dr=pr,vr=Object.prototype.hasOwnProperty;function yr(t,e){var r=c(t),n=!r&&Xe(t),i=!r&&!n&&nr(t),o=!r&&!n&&!i&&dr(t),u=r||n||i||o,a=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],s=a.length;for(var f in t)!e&&!vr.call(t,f)||u&&("length"==f||i&&("offset"==f||"parent"==f)||o&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||ur(f,s))||a.push(f);return a}function br(t){return Bt(t)?yr(t):Mt(t)}var gr=function(t,e){return function(r,n){if(null==r)return r;if(!Bt(r))return t(r,n);for(var i=r.length,o=e?i:-1,u=Object(r);(e?o--:++o<i)&&!1!==n(u[o],o,u););return r}}((function(t,e){return t&&Ve(t,e,br)})),_r=gr;function mr(t){return t}function jr(t,e){var r;return(c(t)?qe:_r)(t,"function"==typeof(r=e)?r:mr)}function wr(t){var e=this.__data__=new X(t);this.size=e.size}wr.prototype.clear=function(){this.__data__=new X,this.size=0},wr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},wr.prototype.get=function(t){return this.__data__.get(t)},wr.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!tt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new rt(n)}return r.set(t,e),this.size=r.size,this};function Sr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new rt;++e<r;)this.add(t[e])}function $r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Or(t,e){return t.has(e)}Sr.prototype.add=Sr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Sr.prototype.has=function(t){return this.__data__.has(t)};var xr=1,Mr=2;function zr(t,e,r,n,i,o){var u=r&xr,c=t.length,a=e.length;if(c!=a&&!(u&&a>c))return!1;var s=o.get(t),f=o.get(e);if(s&&f)return s==e&&f==t;var l=-1,h=!0,p=r&Mr?new Sr:void 0;for(o.set(t,e),o.set(e,t);++l<c;){var d=t[l],v=e[l];if(n)var y=u?n(v,d,l,e,t,o):n(d,v,l,t,e,o);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!$r(e,(function(t,e){if(!Or(p,e)&&(d===t||i(d,t,r,n,o)))return p.push(e)}))){h=!1;break}}else if(d!==v&&!i(d,v,r,n,o)){h=!1;break}}return o.delete(t),o.delete(e),h}var Dr=f.Uint8Array;function kr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function Pr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Ar=1,Tr=2,Fr="[object Boolean]",Er="[object Date]",Lr="[object Error]",Cr="[object Map]",Nr="[object Number]",Yr="[object RegExp]",Rr="[object Set]",Wr="[object String]",Hr="[object Symbol]",Ir="[object ArrayBuffer]",Ur="[object DataView]",qr=l?l.prototype:void 0,Br=qr?qr.valueOf:void 0;var Vr=Object.prototype.propertyIsEnumerable,Jr=Object.getOwnPropertySymbols,Zr=Jr?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var u=t[r];e(u,r,t)&&(o[i++]=u)}return o}(Jr(t),(function(e){return Vr.call(t,e)})))}:function(){return[]},Gr=Zr;function Qr(t){return function(t,e,r){var n=e(t);return c(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,br,Gr)}var Kr=1,Xr=Object.prototype.hasOwnProperty;var tn=1,en="[object Arguments]",rn="[object Array]",nn="[object Object]",on=Object.prototype.hasOwnProperty;function un(t,e,r,n,i,o){var u=c(t),a=c(e),s=u?rn:It(t),f=a?rn:It(e),l=(s=s==en?nn:s)==nn,h=(f=f==en?nn:f)==nn,p=s==f;if(p&&nr(t)){if(!nr(e))return!1;u=!0,l=!1}if(p&&!l)return o||(o=new wr),u||dr(t)?zr(t,e,r,n,i,o):function(t,e,r,n,i,o,u){switch(r){case Ur:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ir:return!(t.byteLength!=e.byteLength||!o(new Dr(t),new Dr(e)));case Fr:case Er:case Nr:return G(+t,+e);case Lr:return t.name==e.name&&t.message==e.message;case Yr:case Wr:return t==e+"";case Cr:var c=kr;case Rr:var a=n&Ar;if(c||(c=Pr),t.size!=e.size&&!a)return!1;var s=u.get(t);if(s)return s==e;n|=Tr,u.set(t,e);var f=zr(c(t),c(e),n,i,o,u);return u.delete(t),f;case Hr:if(Br)return Br.call(t)==Br.call(e)}return!1}(t,e,s,r,n,i,o);if(!(r&tn)){var d=l&&on.call(t,"__wrapped__"),v=h&&on.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,b=v?e.value():e;return o||(o=new wr),i(y,b,r,n,o)}}return!!p&&(o||(o=new wr),function(t,e,r,n,i,o){var u=r&Kr,c=Qr(t),a=c.length;if(a!=Qr(e).length&&!u)return!1;for(var s=a;s--;){var f=c[s];if(!(u?f in e:Xr.call(e,f)))return!1}var l=o.get(t),h=o.get(e);if(l&&h)return l==e&&h==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=u;++s<a;){var v=t[f=c[s]],y=e[f];if(n)var b=u?n(y,v,f,e,t,o):n(v,y,f,t,e,o);if(!(void 0===b?v===y||i(v,y,r,n,o):b)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var g=t.constructor,_=e.constructor;g==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,r,n,i,o))}function cn(t,e,r,n,i){return t===e||(null==t||null==e||!j(t)&&!j(e)?t!=t&&e!=e:un(t,e,r,n,cn,i))}var an=1,sn=2;function fn(t){return t==t&&!M(t)}function ln(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function hn(t){var e=function(t){for(var e=br(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,fn(i)]}return e}(t);return 1==e.length&&e[0][2]?ln(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var i=r.length,o=i,u=!n;if(null==t)return!o;for(t=Object(t);i--;){var c=r[i];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<o;){var a=(c=r[i])[0],s=t[a],f=c[1];if(u&&c[2]){if(void 0===s&&!(a in t))return!1}else{var l=new wr;if(n)var h=n(s,f,a,t,e,l);if(!(void 0===h?cn(f,s,an|sn,n,l):h))return!1}}return!0}(r,t,e)}}function pn(t,e){return null!=t&&e in Object(t)}function dn(t,e){return null!=t&&function(t,e,r){for(var n=-1,i=(e=gt(e,t)).length,o=!1;++n<i;){var u=mt(e[n]);if(!(o=null!=t&&r(t,u)))break;t=t[u]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&qt(i)&&ur(u,i)&&(c(t)||Xe(t))}(t,e,pn)}var vn=1,yn=2;function bn(t){return x(t)?Jt(mt(t)):function(t){return function(e){return jt(e,t)}}(t)}function gn(t){return"function"==typeof t?t:null==t?mr:"object"==typeof t?c(t)?function(t,e){return x(t)&&fn(e)?ln(mt(t),e):function(r){var n=wt(r,t);return void 0===n&&n===e?dn(r,t):cn(e,n,vn|yn)}}(t[0],t[1]):hn(t):bn(t)}function _n(t,e){var r=-1,n=Bt(t)?Array(t.length):[];return _r(t,(function(t,i,o){n[++r]=e(t,i,o)})),n}function mn(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}function jn(t){return t!=t}function wn(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,jn,r)}var Sn="\\ud800-\\udfff",$n="["+Sn+"]",On="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",xn="\\ud83c[\\udffb-\\udfff]",Mn="[^"+Sn+"]",zn="(?:\\ud83c[\\udde6-\\uddff]){2}",Dn="[\\ud800-\\udbff][\\udc00-\\udfff]",kn="(?:"+On+"|"+xn+")"+"?",Pn="[\\ufe0e\\ufe0f]?",An=Pn+kn+("(?:\\u200d(?:"+[Mn,zn,Dn].join("|")+")"+Pn+kn+")*"),Tn="(?:"+[Mn+On+"?",On,zn,Dn,$n].join("|")+")",Fn=RegExp(xn+"(?="+xn+")|"+Tn+An,"g");function En(t){return Qt(t)?function(t){return t.match(Fn)||[]}(t):function(t){return t.split("")}(t)}function Ln(t,e,r){if((t=bt(t))&&(r||void 0===e))return ye(t);if(!t||!(e=yt(e)))return t;var n=En(t),i=En(e),o=function(t,e){for(var r=-1,n=t.length;++r<n&&wn(e,t[r],0)>-1;);return r}(n,i),u=function(t,e){for(var r=t.length;r--&&wn(e,t[r],0)>-1;);return r}(n,i)+1;return mn(n,o,u).join("")}function Cn(t,e){if(!ze(t))return[];if(!ze(e))return[];let r=function(t,e){return ze(t)&&ze(e)?t.split(e):[]}(t,e);var n,i;i=Ln,r=(c(n=r)?ht:_n)(n,gn(i));let o=[];return jr(r,(function(t){ze(t)&&o.push(t)})),o}function Nn(t){if(!Ae(t))return!1;return Ce(t)>=0}function Yn(t,e){if(!ze(t))return"";if(!Nn(e))return"";if(0===(e=Ce(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substr(r,e)}function Rn(t,e){return ze(t)&&Nn(e)?0===(e=Ce(e))?t:function(t,e){return ze(t)&&Nn(e)?0===(e=Ce(e))?"":t.substring(0,e):""}(t,t.length-e):""}function Wn(t){return"[object Array]"===Object.prototype.toString.call(t)}function Hn(t){return"[object Object]"===Object.prototype.toString.call(t)}function In(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Hn(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!Me(t)||""!==t)}(t)||(!!function(t){return!!Wn(t)&&0===t.length}(t)||!!De(t)))))}function Un(t){return!!Wn(t)&&(0!==t.length&&(1!==t.length||!In(t[0])))}var qn="[object Boolean]";function Bn(t){return!0===(e=t)||!1===e||j(e)&&m(e)==qn;var e}function Vn(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}function Jn(t){return!!e.existsSync(t)&&(!e.lstatSync(t).isDirectory()&&!e.lstatSync(t).isSymbolicLink())}function Zn(t){return!!e.existsSync(t)&&(!e.lstatSync(t).isFile()&&!e.lstatSync(t).isSymbolicLink())}function Gn(t){if(!e.existsSync(t))return{success:"folder does not exist: "+t};if(!Zn(t))return{error:"input path is not a folder: "+t};try{e.readdirSync(t).forEach((function(r){let n=t+"/"+r;if(e.lstatSync(n).isDirectory())Gn(n);else try{e.unlinkSync(n)}catch(t){}}))}catch(t){return{error:t}}try{e.rmdirSync(t)}catch(t){return{error:t}}return{success:"done: "+t}}function Qn(t){if(!e.existsSync(t)){let r=function(t){if(Zn(t))return{success:"input folder is already exists: "+t};if(e.existsSync(t))return{error:"input path already exists: "+t};try{e.mkdirSync(t,{recursive:!0})}catch(t){return{error:t}}return{success:"done: "+t}}(t);return r.error?r.error:{success:"done: "+t}}if(!Zn(t))return{error:"input path is not a folder"};try{e.readdirSync(t).forEach((function(r){let n=t+"/"+r;if(e.lstatSync(n).isDirectory())Gn(n);else try{e.unlinkSync(n)}catch(t){}}))}catch(t){return{error:t}}return{success:"done: "+t}}function Kn(t){if(!e.existsSync(t))return{success:"file does not exist: "+t};if(!Jn(t))return{error:"input path is not a file: "+t};try{e.unlinkSync(t)}catch(t){return{error:t}}return{success:"done: "+t}}function Xn(t){return null==t?[]:function(t,e){return ht(e,(function(e){return t[e]}))}(t,br(t))}var ti={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,o||t,u),a=r?r+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],c]:t._events[a].push(c):(t._events[a]=c,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function c(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),c.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},c.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,u=new Array(o);i<o;i++)u[i]=n[i].fn;return u},c.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,i,o,u){var c=r?r+t:t;if(!this._events[c])return!1;var a,s,f=this._events[c],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,i),!0;case 5:return f.fn.call(f.context,e,n,i,o),!0;case 6:return f.fn.call(f.context,e,n,i,o,u),!0}for(s=1,a=new Array(l-1);s<l;s++)a[s-1]=arguments[s];f.fn.apply(f.context,a)}else{var h,p=f.length;for(s=0;s<p;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,e);break;case 3:f[s].fn.call(f[s].context,e,n);break;case 4:f[s].fn.call(f[s].context,e,n,i);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];f[s].fn.apply(f[s].context,a)}}return!0},c.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var c=this._events[o];if(c.fn)c.fn!==e||i&&!c.once||n&&c.context!==n||u(this,o);else{for(var a=0,s=[],f=c.length;a<f;a++)(c[a].fn!==e||i&&!c[a].once||n&&c[a].context!==n)&&s.push(c[a]);s.length?this._events[o]=1===s.length?s[0]:s:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(ti);var ei=We(ti.exports);function ri(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=0,r=[];var n;Ae(n=t)&&Ce(n)<0&&(t=0),t=Ce(t);let i=new ei;return i.get=function(){if(r.length>0){return e+=1,r.splice(0,1)[0]}return null},i.cb=function(){e-=1,e<0&&(e=0),r.length>0&&i.emit("message",r)},i.push=function(n){r.push(n),(t<=0||e<t)&&i.emit("message",r)},i.clear=function(){e=0,r=[]},i}function ni(t){if(!ze(t))return"";let e=function(t){if(!ze(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===Yn(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===Yn(t,1)){let e=Rn(t,1);return":"===Yn(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===Yn(t,1)){let e=Rn(t,1);return 0===pe(e)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}async function ii(t){try{Jn(t)?e.unlinkSync(t):Zn(t)&&Gn(t),e.writeFileSync(t,"test","utf8"),e.unlinkSync(t)}catch(t){return!1}return!0}i.registerFormat("zip-encrypted",o);var oi={zipFile:async function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.existsSync(r))return Promise.reject("invalid path of source file");if(!e.lstatSync(r).isFile())return Promise.reject("path of source is not file");if(!ii(n))return Promise.reject("invalid fpSrc");let u=wt(o,"level",9),c=wt(o,"pw","");try{let o=Vn();e.existsSync(t.dirname(n))||e.mkdirSync(t.dirname(n),{recursive:!0});let a,s=e.createWriteStream(n);return a=""===c?i("zip",{zlib:{level:u}}):i("zip-encrypted",{zlib:{level:u},encryptionMethod:"zip20",password:c}),s.on("close",(function(){o.resolve("done: "+n)})),a.on("warning",(function(t){})),a.on("error",(function(t){Promise.reject(t)})),a.pipe(s),a.file(r,{name:t.basename(r)}),a.finalize(),o}catch(t){return Promise.reject(t)}},zipFolder:async function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.existsSync(r))return Promise.reject("invalid path of source file");if(!e.lstatSync(r).isDirectory())return Promise.reject("path of source is not folder");if(!ii(n))return Promise.reject("invalid fpSrc");let u=wt(o,"level",9),c=wt(o,"pw","");try{let o=Vn();e.existsSync(t.dirname(n))||e.mkdirSync(t.dirname(n),{recursive:!0});let a,s=e.createWriteStream(n);return a=""===c?i("zip",{zlib:{level:u}}):i("zip-encrypted",{zlib:{level:u},encryptionMethod:"zip20",password:c}),s.on("close",(function(){o.resolve("done: "+n)})),a.on("warning",(function(t){})),a.on("error",(function(t){Promise.reject(t)})),a.pipe(s),a.directory(r,t.basename(r)),a.finalize(),o}catch(t){return Promise.reject(t)}},unzip:async function(r,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.existsSync(r))return Promise.reject("invalid path of source file");if(!e.lstatSync(r).isFile())return Promise.reject("path of source is not file");if(!ii(n))return Promise.reject("invalid fpSrc");let o=wt(i,"pw","");try{return await async function(r,n,i){return function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={},i=!1,o=Vn();if(!Wn(t)&&!Hn(t))return o.reject("rs is not an array or object"),o;let u=!1;if(Hn(t)){u=!0;let e=[];jr(t,((t,r)=>{e.push({k:r,v:t})})),t=e}let c=ri(r);return c.on("message",(function(r){if(i)return;let a,s=c.get();if(Ue(e)){let t=s.key,r=s.value;u&&(t=s.value.k,r=s.value.v),a=e(r,t)}else a=s.value;a.then((t=>{n[s.key]=t})).catch((t=>{i=!0,c.clear(),o.reject(t)})).finally((()=>{c.cb(),pe(n)===t.length&&o.resolve(Xn(n))}))})),jr(t,((t,e)=>{c.push({key:e,value:t})})),o}((await u.Open.file(r)).files,(async r=>{let o=t.join(n,r.path);return"File"===r.type?async function(r,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{e.existsSync(t.dirname(n))||e.mkdirSync(t.dirname(n),{recursive:!0});let o=await r.buffer(i);e.writeFileSync(n,o)}catch(t){return Promise.reject(t)}return"done"}(r,o,i):async function(t){try{e.existsSync(t)||e.mkdirSync(t,{recursive:!0})}catch(t){return Promise.reject(t)}return"done"}(o)}))}(r,n,o),Promise.resolve("done: "+ni(n))}catch(t){return Promise.reject(t)}}};let ui=t.resolve();return async function(i,o){let u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null,s=wt(c,"clean");Bn(s)||(s=!1);let f=wt(c,"funProg");if("win32"!==r.platform)return Promise.reject("operating system is not windows");if(!ze(i))return Promise.reject("url is not a file");let l="yt-dlp",h=`${ui}/node_modules/w-dwload-dlp/${l}/`,p=`${ui}/${l}/`;Zn(h)&&(p=h);let d=t.resolve(p,"yt-dlp.exe");d=`"${d}"`;let v=t.resolve(p,"ffmpeg.exe");if(!Jn(v)){let r=t.resolve(p,"ffmpeg.zip"),n=t.resolve(p,"ffmpeg.zip.001"),i=t.resolve(p,"ffmpeg.zip.002"),o=t.resolve(p,"ffmpeg.zip.003"),u=t.resolve(p,"ffmpeg.zip.004"),c=t.resolve(p,"ffmpeg.zip.005");await function(t,r){if(!Un(t)&&!ze(t))throw new Error(`files[${t}] is not an effective string or array`);Un(t)||(t=[t]);let n=Vn(),i=e.createWriteStream(r),o=()=>{if(0===pe(t))i.end(),n.resolve();else{let r=e.createReadStream(t.shift());r.pipe(i,{end:!1}),r.on("end",(()=>{o()})),r.on("error",(t=>{n.reject(t)}))}};return o(),n}([n,i,o,u,c],r);let a=t.resolve(p,"temp");await oi.unzip(r,a);!function(t,r){if(!Jn(t))return{error:`pahOld[${t}] is not a file`};if(e.existsSync(r))return{error:`pahNew[${r}] does exist`};try{e.renameSync(t,r)}catch(t){return{error:t}}}(t.resolve(`${a}/`,"ffmpeg.exe"),v);Kn(r),Gn(a)}let y=r.cwd(),b=p;r.chdir(b);let g=`${function(){if(!Ue(Ie))throw new Error("invalid dayjs");return Ie().format("YYYYMMDDHHmmss")}()}-${Re(6)}`,_=`${g}`,m=t.resolve(p,"Downloads");s&&Qn(m);let j=t.resolve(m,_),w=t.resolve(m,`${g}.mp4`),S=!1,$=0,O=0,x=0,M=0,z=Ue(f),D=`"${i}" -o "${j}" --newline --merge-output-format "mp4"`;return await function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=wt(r,"cbStdout"),o=wt(r,"cbStderr");function u(t){try{return t.toString("utf8")}catch(t){}return""}return new Promise((function(r,c){let a="",s=n.exec(`${t} ${e}`,((t,e,r)=>{if(t)return c(t);ze(e=u(e))&&(a+=e),ze(r=u(r))&&(a+=r)}));s.on("close",(t=>{r(a)})),Ue(i)&&s.stdout.on("data",(function(t){i(t)})),Ue(o)&&s.stderr.on("data",(function(t){o(t)}))}))}(d,D,{cbStdout:t=>{let e=Cn(t," "),r=wt(e,1,"");if(!("%"===Yn(r,1)))return;let n=Rn(r,1);if(n=Pe(n),!S&&100===n)return void(S=!0);if(!S)return;if(n*=.99,!(M<n))return;M=n;let i=wt(e,10);i=Rn(i,1);let o=Cn(i,"/");O=wt(o,0,""),O=Pe(O),O<=$||(x=wt(o,1,""),x=Pe(x),z&&f(M,O,x),$=O)}}).catch((t=>{console.log("execProcess catch",t),a="execProcess error"})),z&&(M=100,f(M,x,x)),r.chdir(y),ze(a)?Promise.reject(a):Jn(w)?(u=function(t,r){try{e.copyFileSync(t,r)}catch(t){return{error:t}}return{success:"done: "+r}}(w,o),a=wt(u,"error"),a?Promise.reject(a.toString()):(u=Kn(w),"ok")):(console.log(`can not find the merged file[${w}]`),a=`invalid url[${i}] or can not download`,Promise.reject(a))}}));
//# sourceMappingURL=w-dwload-dlp.umd.js.map
